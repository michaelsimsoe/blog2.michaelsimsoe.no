<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ulik import url hindrer Angular service √• opptre som en singleton</title>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <header>
    <h1>{{title}}</h1>
  </header>
  <main>
    <h1>‚òÅ En singleton som ikke vil</h1>
<p>En service i Angular kan opptre som en singleton i applikasjonen, alts√• s√• at det kun opprettes en instans av den, hvis providedIn egenskapen settes til &#39;root&#39;:</p>
<pre><code class="language-javascript">import { Injectable } from &#39;@angular/core&#39;;

@Injectable({
  providedIn: &#39;root&#39;,
})
export class SomeService {}
</code></pre>
<p>(evt. inkludert i AppModule pre angular 6)
<a href="https://angular.io/guide/singleton-services">Singleton services i angulardokumentasjonen</a></p>
<p>Dette er forventet adferd. S√• n√•r dette ikke var tilfelle under dagens jobbkoding skapte det en anseelig mengde hodebry. Jeg hadde ett objekt i en service som kun sporadisk ble oppdatert. Som relativt uerfaren angularutvikler ga ikke dette noen mening for meg.</p>
<p>Etter n√¶rmere etterforskning viser det seg at innholdet i det aktuelle objektet varierer etter hvor i applikasjonen metodene invokeres. Jeg henter inn servicen i flere komponenter, men det skal jo ikke ha noe √• si? <em>providedIn</em> er satt til <em>root</em> ihht til dokumentasjonen. Usikkerheten eksploderer og jeg roter rundt og pr√∏ver tilfeldige ting, trykker meg gjennom debuggeren linje for linje, igjen og igjen.</p>
<h2>üó∫ Det logiske neste steg...</h2>
<p>Er selvf√∏lgelig √• sp√∏rre en voksen om hjelp. Slacker opp en erfaren kollega. Deler skjerm. Han deler mitt tankesett vedr√∏rende service som singleton. Vi utelukker typos og tullefeil da jeg er en flittig bruker av CLIen og import skjer vha (ctr + .).</p>
<p>Den erfarne kollega spekulerer og foresp√∏r i en bisetning om det er forkjsell p√• url i importen i de to forskjellige komponentene hvor servicen brukes.</p>
<h3>üëè Lo and behold</h3>
<p><strong><em>Komponent 1</em></strong>
<img src="./images/import.png" alt="Komponent 1"></p>
<p><strong><em>Komponent 2</em></strong>
<img src="./images/importwithext.png" alt="Komponent2"></p>
<p>Det var alts√• en .js endelse som √∏dela for meg! Den f√•r p√• en eller annen m√•te Angular til √• ikke kjenne igjen servicen og instantierer den p√• nytt.</p>
<p><img src="./images/yes.jpg" alt="Man on hill - Photo by Jason Hogan on Unsplash"></p>

  </main>
  <footer>
    <p>&copy; 2024 My Blog</p>
  </footer>
</body>
</html>
